{
  "metadata": {
    "offerName": "Work From Home - LocalJobMatcher",
    "offerCreator": "localjobsmatcher.com",
    "version": "6.2",
    "description": "Fixed flow: Direct to landing page or improved Facebook handling",
    "entryPoint": {
      "startUrl": "https://www.opph3hftrk.com/HMLWQ96/261TC5C/",
      "fallbackUrl": "https://www.facebook.com/61575553191003/posts/pfbid0sdVc5c1ucHj7v9f9wLQ51JE9AL2JFbNn1sv4Aec6DmgT4rqqkkHTqH5n6g88rYeVl/?app=fbl"
    }
  },
  "funnel": {
    "pages": [
      {
        "pageNumber": 0,
        "pageName": "Facebook Post - Click Offer Link (Optional)",
        "pageDetection": {
          "checkForElement": "a[href*='opph3hftrk.com'], a[href*='HMLWQ96'], [href*='opph3hftrk.com'], input[name*='zip'], input[placeholder*='ZIP'], input[placeholder*='zip']"
        },
        "fields": [],
        "navigation": { 
          "type": "conditional", 
          "selectors": [
            "a[href*='opph3hftrk.com/HMLWQ96/261TC5C']",
            "a[href*='opph3hftrk.com']",
            "a[href*='HMLWQ96']",
            "a[href*='261TC5C']"
          ],
          "waitAfterClick": 5000,
          "waitForUrlChange": true,
          "retryIfNoNavigation": true,
          "maxWaitTime": 30000,
          "expectNewTab": true,
          "skipIfDirectLanding": true
        }
      },
      {
        "pageNumber": 1,
        "pageName": "ZIP Code Entry",
        "pageDetection": {
          "checkForElement": "input[name*='zip'], input[placeholder*='ZIP'], input[placeholder*='zip'], input[type='text'], input[name='postal_code'], input[name='zipcode']"
        },
        "fields": [
          { 
            "fieldType": "zipCode", 
            "selectors": [
              "input[name*='zip']:visible",
              "input[placeholder*='ZIP']:visible", 
              "input[placeholder*='zip']:visible",
              "input[name='postal_code']:visible",
              "input[name='zipcode']:visible",
              "input[name='zip_code']:visible",
              "#zip:visible",
              ".zip-input:visible",
              "form input[type='text']:visible:first",
              "input[type='text']:visible:first"
            ], 
            "action": "clear_and_type" 
          }
        ],
        "navigation": { 
          "type": "button", 
          "selectors": [
            "button[type='submit']:visible",
            "input[type='submit']:visible",
            "button:contains('View Jobs'):visible",
            "button:contains('Continue'):visible",
            "button:contains('Next'):visible",
            "button:contains('Submit'):visible",
            ".submit-button:visible",
            ".continue-button:visible",
            "button.btn-primary:visible",
            "form button:visible:first",
            "button:visible:first"
          ],
          "waitAfterClick": 5000,
          "waitForUrlChange": true,
          "retryIfNoNavigation": true
        }
      },
      {
        "pageNumber": 2,
        "pageName": "Personal Info",
        "pageDetection": {
          "checkForElement": "input[placeholder*='First'], input[name*='first'], input[placeholder*='Name'], input[name='firstName'], input[name='first_name']"
        },
        "fields": [
          { 
            "fieldType": "firstName", 
            "selectors": [
              "input[placeholder*='First Name']:visible",
              "input[name*='first']:visible",
              "input[name='firstName']:visible",
              "input[name='first_name']:visible",
              "#first_name:visible",
              "#firstName:visible",
              "input[placeholder*='First']:visible"
            ], 
            "action": "type" 
          },
          { 
            "fieldType": "lastName", 
            "selectors": [
              "input[placeholder*='Last Name']:visible",
              "input[name*='last']:visible",
              "input[name='lastName']:visible",
              "input[name='last_name']:visible",
              "#last_name:visible",
              "#lastName:visible",
              "input[placeholder*='Last']:visible"
            ], 
            "action": "type" 
          },
          { 
            "fieldType": "email", 
            "selectors": [
              "input[placeholder*='Email']:visible",
              "input[type='email']:visible",
              "input[name='email']:visible",
              "#email:visible"
            ], 
            "action": "type" 
          }
        ],
        "navigation": { 
          "type": "button", 
          "selectors": [
            "button[type='submit']:visible",
            "input[type='submit']:visible",
            "button:contains('Continue'):visible",
            "button:contains('Next'):visible",
            "button:contains('Submit'):visible",
            ".submit-button:visible",
            ".continue-button:visible",
            "button.btn-primary:visible",
            "form button:visible:first",
            "button:visible:first"
          ],
          "waitAfterClick": 5000,
          "waitForUrlChange": true,
          "retryIfNoNavigation": true
        }
      },
      {
        "pageNumber": 3,
        "pageName": "Phone and Additional Info",
        "pageDetection": {
          "checkForElement": "input[name*='phone'], input[type='tel'], input[placeholder*='Phone']"
        },
        "fields": [
          { 
            "fieldType": "phone", 
            "selectors": [
              "input[name='phone']:visible",
              "input[type='tel']:visible",
              "input[placeholder*='Phone']:visible",
              "input[name='phoneNumber']:visible",
              "input[name='phone_number']:visible",
              "#phone:visible"
            ], 
            "action": "type" 
          },
          { 
            "fieldType": "dobMonth", 
            "selectors": [
              "select[autocomplete='bday-month']:visible",
              "select[name*='month']:visible",
              "select[name='birth_month']:visible",
              "#birth_month:visible"
            ], 
            "action": "select", 
            "optional": true 
          },
          { 
            "fieldType": "dobDay", 
            "selectors": [
              "select[autocomplete='bday-day']:visible",
              "select[name*='day']:visible",
              "select[name='birth_day']:visible",
              "#birth_day:visible"
            ], 
            "action": "select", 
            "optional": true 
          },
          { 
            "fieldType": "dobYear", 
            "selectors": [
              "select[autocomplete='bday-year']:visible",
              "select[name*='year']:visible",
              "select[name='birth_year']:visible",
              "#birth_year:visible"
            ], 
            "action": "select", 
            "optional": true 
          },
          { 
            "fieldType": "consentCheckbox", 
            "selectors": [
              "#leadid_tcpa_disclosure:visible",
              "input[type='checkbox']:visible",
              "input[name*='consent']:visible",
              "input[name*='agree']:visible",
              "input[name*='terms']:visible"
            ], 
            "action": "click",
            "optional": true
          }
        ],
        "navigation": {
          "type": "button",
          "selectors": [
            "button[type='submit']:visible",
            "input[type='submit']:visible",
            "button:contains('Continue'):visible",
            "button:contains('Next'):visible",
            "button:contains('Submit'):visible",
            ".submit-button:visible",
            ".continue-button:visible",
            "button.btn-primary:visible",
            "form button:visible:first",
            "button:visible:first"
          ],
          "waitAfterClick": 5000,
          "waitForUrlChange": true,
          "retryIfNoNavigation": true
        }
      }
    ]
  },
  "settings": {
    "delays": {
      "betweenFields": [800, 2000],
      "pageLoad": 5000,
      "navigationTimeout": 30000
    }
  }
}
